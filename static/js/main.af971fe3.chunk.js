(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{256:function(e,t,n){},263:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(80),l=n.n(s),i=n(11),o=n.n(i),u=n(19),c=n(2),m=n(3),p=n(6),d=n(5),h=n(7),b=n(85),f=n(15),v=n(81),g=n.n(v),y=n(82),E=n(88),k=n(35),w=n.n(k),j=function(){function e(){Object(c.a)(this,e)}return Object(m.a)(e,null,[{key:"getConnection",value:function(){var e=Object(u.a)(o.a.mark(function e(t){var n,a;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{octokit:new w.a,status:"unauthenticated"});case 2:return n=void 0,a=new w.a({auth:"token ".concat(t)}),e.next=6,a.request("GET /").then(function(e){n={octokit:a,status:"authenticated"}}).catch(function(e){"HttpError"===e.name&&401===e.status&&(n={octokit:new w.a,status:"invalid-credentials"})});case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getTaskCount",value:function(){var e=Object(u.a)(o.a.mark(function e(t,n){var a,r,s,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.issues.listComments.endpoint.merge({owner:n.owner,repo:n.repo,number:n.number}),e.next=3,t.paginate(a);case 3:return(r=(r=e.sent).map(function(e){return e.body})).unshift(n.body),r=r.join("\n").split(/\r?\n/),s=r.filter(function(e){return e.trim().toLowerCase().startsWith("- [x]")}).length,l=r.filter(function(e){return e.trim().startsWith("- [ ]")}).length,e.abrupt("return",{completed:s,outstanding:l});case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getIssues",value:function(){var e=Object(u.a)(o.a.mark(function e(t,n,a){var r,s,l;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.map(function(e){return"repo:"+e}).join(" ")+" "+n.map(function(e){return"label:".concat(e)}).join(" ")+" is:issue",s=t.search.issuesAndPullRequests.endpoint.merge({q:r}),e.next=4,t.paginate(s);case 4:return l=e.sent,e.abrupt("return",l.map(function(e){return new O(e)}));case 6:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),O=function(){function e(t){Object(c.a)(this,e),this.githubIssue=t,this.url=t.html_url,this.labels=t.labels.map(function(e){return{color:e.color,name:e.name}}),this.progress=void 0,this.title=t.title,this.number=t.number,this.assignees=t.assignees;var n=t.repository_url.split("/"),a=n.slice(n.length-2),r=Object(E.a)(a,2);this.owner=r[0],this.repo=r[1],this.type=e.getType(t),this.state=e.getState(t)}return Object(m.a)(e,null,[{key:"getType",value:function(e){var t=e.labels.map(function(e){return e.name});if(t.includes("bug")){for(var n=["p1","p2","p3"],a=0;a<n.length;a++){var r=n[a];if(t.includes(r))return"".concat(r,"bugs")}return"p1bugs"}return t.includes("feature")||t.includes("enhancement")?"issues":"others"}},{key:"getState",value:function(e){return"closed"===e.state?"done":"open"!==e.state||0!==e.assignees.length&&void 0!==e.assignee?"wip":"todo"}}]),e}(),S=j,C=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("pre",null,'\n    \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2590\u2588\u2584\u2584\u2584\u2584\u2588\u258c\n    \u2588\u2588\u2588\u2588\u2588\u2588\u258c\u2584\u258c\u2584\u2590\u2590\u258c\u2588\u2588\u2588\u258c\u2580\u2580\u2588\u2588\u2580\u2580\n    \u2588\u2588\u2588\u2588\u2584\u2588\u258c\u2584\u258c\u2584\u2590\u2590\u258c\u2580\u2588\u2588\u2588\u2584\u2584\u2588\u258c\n    \u2584\u2584\u2584\u2584\u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\n    Please what means "',Array.join(this.props.location.pathname.match(/.{1,36}/g),"\n                       "),'"?')}}]),t}(a.Component),N=n(16),x=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(e){e.preventDefault();var t=prompt("Personal github token",localStorage.getItem("github_token")||"");null!==t&&(localStorage.setItem("github_token",t),window.location.reload())}},{key:"render",value:function(){return r.a.createElement("div",{className:"TokenInput ".concat(this.props.status),onClick:this.handleClick,title:"unauthenticated"===this.props.status?"Add a personal GitHub token to raise the limit of requests you can make to the API":"invalid-credentials"===this.props.status?"Your github token is invalid (fell back to unauthenticated access)":"Successfully connecting using personal GitHub token"},"unauthenticated"===this.props.status?"Add ":"","Personal GitHub Token")}}]),t}(a.Component),D=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e,t=this,n=Object(N.a)(new Set((e=[]).concat.apply(e,Object(N.a)(this.props.issues.map(function(e){return e.labels.map(function(e){return e.name})}))))).filter(function(e){return e.startsWith("phase:")}).sort(function(e,t){return Number(e.split(":")[1])-Number(t.split(":")[1])}),a={};return n.forEach(function(e){a[e]=t.props.issues.filter(function(t){return t.labels.map(function(e){return e.name}).includes(e)}).sort(function(e,t){var n=["done","wip","todo"];return e.state===t.state?e.number-t.number:n.indexOf(e.state)-n.indexOf(t.state)})}),r.a.createElement("div",{className:"Plan"},r.a.createElement("p",{className:"label"},this.props.labels.join(" ")),r.a.createElement("ul",null,n.map(function(e){return r.a.createElement("li",{className:"phase",key:e},e,r.a.createElement("ul",null,a[e].map(function(e){return r.a.createElement("li",{className:"task",key:e.number},r.a.createElement("a",{href:e.url},"".concat(e.number," ").concat(e.title)),r.a.createElement("span",{className:"state "+e.state},"done"===e.state?" (done)":"wip"===e.state?" (in progress)":""))})))})),r.a.createElement(x,{status:this.props.connectionStatus}))}}]),t}(a.Component),I=n(17),P=n.n(I);function T(e,t){return{labels:e,repo:t,deliveryDate:void 0,todo:{issues:[],p1bugs:[],p2bugs:[],p3bugs:[],others:[]},wip:{issues:[],p1bugs:[],p2bugs:[],p3bugs:[],others:[]},done:{issues:[],p1bugs:[],p2bugs:[],p3bugs:[],others:[]}}}function A(e,t){return null===t?null:e.milestone&&e.milestone.due_on?void 0===t?new Date(e.milestone.due_on):Math.max(t,new Date(e.milestone.due_on)):null}var L=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"calculatePercentCompleted",value:function(e){var t=["issues","p1bugs"],n=t.map(function(t){return e.done[t].length}).reduce(function(e,t){return e+t}),a=t.map(function(t){return e.todo[t].length+e.wip[t].length+e.done[t].length}).reduce(function(e,t){return e+t},0);return 0===a?"~":(n/a*100).toFixed(0)}},{key:"getAssigneesFilter",value:function(e){var t=Object(N.a)(new Set(e.map(function(e){return e.assignees.map(function(e){return e.login})}).reduce(function(e,t){return e.concat(t)},[]))).map(function(e){return"assignee:".concat(e)}).join("+");return t||(t="no:assignee"),t}},{key:"makeLink",value:function(e,t,n,a){if(0===a.length)return r.a.createElement("span",null,"0");n||(n=[]);var s=!1;n.includes("assignee:*")&&(n=n.filter(function(e){return"assignee:*"!==e}),s=!0);var l=(n=n.concat(t.map(function(e){return"label:".concat(e)}))).join("+"),i="";if(s){var o=this.getAssigneesFilter(a);i="https://github.com/search?utf8=%E2%9C%93&q=repo%3A".concat(e,"+").concat(l,"+").concat(o,"&type=Issues&ref=advsearch&l=&l=+")}else i="https://github.com/".concat(e,"/issues?utf8=%E2%9C%93&q=").concat(l);var u=a.map(function(e){return"#".concat(e.number," ").concat(e.title)}).reduce(function(e,t){return e.concat(t)},[]);return r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",title:u.join("\n")},u.length)}},{key:"render",value:function(){var e=this.props.repoFeature;return r.a.createElement("div",{className:"Summary-Row"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/".concat(e.repo,"/issues")},e.repo)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:feature"],e.todo.issues)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","assignee:*","label:feature"],e.wip.issues)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:closed","label:feature"],e.done.issues)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:bug","-label:p2","-label:p3","-label:p4","-label:p5"],e.todo.p1bugs)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:bug","label:p2"],e.todo.p2bugs)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:bug","label:p3"],e.todo.p3bugs)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","assignee:*","label:bug"],e.wip.p1bugs.concat(e.wip.p2bugs).concat(e.wip.p3bugs))),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:closed","label:bug"],e.done.p1bugs.concat(e.done.p2bugs).concat(e.done.p3bugs))),r.a.createElement("div",null,this.makeLink(e.repo,e.label,["is:open"].concat(e.todo.others.concat(e.wip.others).map(function(e){return e.number})),e.todo.others.concat(e.wip.others))),r.a.createElement("div",{className:e.deliveryDate?"":"NoDate"},e.deliveryDate?P()(e.deliveryDate,"yyyy-mm-dd"):"n/a"),r.a.createElement("div",{className:"Completed"},this.calculatePercentCompleted(e),"%"))}}]),t}(a.Component),_=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"calculatePercentCompleted",value:function(e){var t=["issues","p1bugs"],n=0,a=0,r=!0,s=!1,l=void 0;try{for(var i,o=function(){var e=i.value;n+=t.map(function(t){return e.done[t].length}).reduce(function(e,t){return e+t}),a+=t.map(function(t){return e.todo[t].length+e.wip[t].length+e.done[t].length}).reduce(function(e,t){return e+t},0)},u=e.repos[Symbol.iterator]();!(r=(i=u.next()).done);r=!0)o()}catch(c){s=!0,l=c}finally{try{r||null==u.return||u.return()}finally{if(s)throw l}}return 0===a?"~":(n/a*100).toFixed(0)}},{key:"render",value:function(){var e=function(e,t,n){var a={},r=!0,s=!1,l=void 0;try{for(var i,o=n[Symbol.iterator]();!(r=(i=o.next()).done);r=!0){var u=i.value;a[u]=T(t,u)}}catch(v){s=!0,l=v}finally{try{r||null==o.return||o.return()}finally{if(s)throw l}}var c=!0,m=!1,p=void 0;try{for(var d,h=e[Symbol.iterator]();!(c=(d=h.next()).done);c=!0){var b=d.value,f=a["".concat(b.owner,"/").concat(b.repo)];f[b.state][b.type].push(b),"done"!==b.state&&["issues","p1bugs"].includes(b.type)&&(f.deliveryDate=A(b,f.deliveryDate))}}catch(v){m=!0,p=v}finally{try{c||null==h.return||h.return()}finally{if(m)throw p}}return{labels:t,repos:Object.values(a)}}(this.props.issues,this.props.labels,this.props.repos),t=e.repos.map(function(e){return r.a.createElement(L,{repoFeature:e,key:e.repo})});return r.a.createElement("div",{className:"Summary"},r.a.createElement("div",{className:"Summary-Header"},r.a.createElement("div",{className:"Label"},e.labels.join(" ")),r.a.createElement("div",{className:"PercentComplete"},this.calculatePercentCompleted(e),"%")),r.a.createElement("div",{className:"Summary-Table"},r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Column Implementation"}),r.a.createElement("div",{className:"Summary-Column Implementation"}),r.a.createElement("div",{className:"Summary-Column Implementation"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Row Summary-TableHeader"},r.a.createElement("div",null,"Repo"),r.a.createElement("div",null,r.a.createElement("span",{className:"MetaTitleHolder"},r.a.createElement("span",{className:"MetaTitle"},"Planned Work")),"Todo"),r.a.createElement("div",null,"WIP"),r.a.createElement("div",null,"Done"),r.a.createElement("div",null,r.a.createElement("span",{className:"MetaTitleHolder"},r.a.createElement("span",{className:"MetaTitle"},"Bugs")),"P1"),r.a.createElement("div",null,"P2"),r.a.createElement("div",null,"P3"),r.a.createElement("div",null,"WIP"),r.a.createElement("div",null,"Fixed"),r.a.createElement("div",null,"Other"),r.a.createElement("div",null,"Delivery"),r.a.createElement("div",null)),t),r.a.createElement(x,{status:this.props.connectionStatus}))}}]),t}(a.Component),B=n(83),W=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){if(0===this.props.issues.length)return r.a.createElement("div",{className:"Burndown"},r.a.createElement("h3",null,"Loading data..."));for(var e=[],t={},n=new Date(Math.min.apply(Math,Object(N.a)(this.props.issues.map(function(e){return new Date(e.githubIssue.created_at)})))),a=new Date;n<a;){var s=P()(n,"yyyy-mm-dd");e.push(s),t[s]=0,n.setDate(n.getDate()+1)}this.props.issues.forEach(function(n){for(var a=P()(n.githubIssue.created_at,"yyyy-mm-dd"),r=n.githubIssue.closed_at?P()(n.githubIssue.closed_at,"yyyy-mm-dd"):e[e.length-1],s=e.indexOf(a);s<=e.indexOf(r);s++)t[e[s]]+=1});var l=[{label:"Open issues",data:e.map(function(e){return t[e]}),lineTension:0}],i=Object.keys(t).reduce(function(e,n){return t[e]===t[n]?e<n?e:n:t[e]>t[n]?e:n}),o=t[i],u=t[e[e.length-1]],c=e.length-e.indexOf(i)-1,m=(o-u)/c,p=e.indexOf(i)+1+o/m-e.length;if(p!==1/0){for(var d=new Date(e[e.length-1]),h=0;h<p+1;h++)d.setDate(d.getDate()+1),e.push(P()(d,"yyyy-mm-dd"));for(var b=[],f=0;f<e.indexOf(i);f++)b.push(null);for(var v=0;v<c+p;v++)b.push(o-v*m);b.push(0),l.push({label:"Projected delivery",data:b,lineTension:0,fill:!1,pointRadius:0,borderColor:"#738d04",borderWidth:1})}var g={labels:e,datasets:l};return r.a.createElement("div",{className:"Burndown"},r.a.createElement("h3",null,this.props.labels.join(" ")),r.a.createElement(B.a,{data:g,options:{scales:{yAxes:[{ticks:{min:0}}]}}}))}}]),t}(a.Component),H=(n(256),function(e){function t(e){var n;return Object(c.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this))).state={issues:[],repos:[],labels:[],connectionStatus:"connecting"},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(o.a.mark(function e(){var t,n,a,r;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.hash.includes("?")){e.next=14;break}return t=g.a.parse(window.location.hash.substring(window.location.hash.indexOf("?"))),Array.isArray(t.repo)||(t.repo=[t.repo]),Array.isArray(t.label)||(t.label=[t.label]),n=localStorage.getItem("github_token"),e.next=7,S.getConnection(n);case 7:return a=e.sent,this.setState({connectionStatus:a.status}),document.title=t.label.join(" "),e.next=12,S.getIssues(a.octokit,t.label,t.repo);case 12:r=e.sent,this.setState({labels:t.label,repos:t.repo,issues:r});case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,{onChange:function(e){window.location.reload()}}),r.a.createElement(b.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/summary",render:function(t){return r.a.createElement(_,Object.assign({},t,{repos:e.state.repos,labels:e.state.labels,issues:e.state.issues,connectionStatus:e.state.connectionStatus}))}}),r.a.createElement(f.a,{path:"/plan",render:function(t){return r.a.createElement(D,Object.assign({},t,{repos:e.state.repos,labels:e.state.labels,issues:e.state.issues,connectionStatus:e.state.connectionStatus}))}}),r.a.createElement(f.a,{path:"/burndown",render:function(t){return r.a.createElement(W,Object.assign({},t,{repos:e.state.repos,labels:e.state.labels,issues:e.state.issues,connectionStatus:e.state.connectionStatus}))}}),r.a.createElement(f.a,{exact:!0,path:"/",component:M}),r.a.createElement(f.a,{component:C}))))}}]),t}(a.Component)),M=function(e){function t(){return Object(c.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return window.location.replace("".concat(window.location.pathname,"#/summary").concat(window.location.search)),r.a.createElement("p",null,"Redirecting...")}}]),t}(a.Component),F=H;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(F,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},89:function(e,t,n){e.exports=n(263)}},[[89,1,2]]]);
//# sourceMappingURL=main.af971fe3.chunk.js.map