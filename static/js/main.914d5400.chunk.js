(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{125:function(e,t,n){},132:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(41),o=n.n(s),i=n(4),u=n.n(i),c=n(11),l=n(1),m=n(2),p=n(6),d=n(5),h=n(7),b=n(45),f=n(12),v=n(42),g=n.n(v),y=n(43),k=function(){function e(){Object(l.a)(this,e)}return Object(m.a)(e,null,[{key:"getTaskCount",value:function(){var e=Object(c.a)(u.a.mark(function e(t,n){var a,r,s,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.issues.listComments.endpoint.merge({owner:n.owner,repo:n.repo,number:n.number}),e.next=3,t.paginate(a);case 3:return(r=(r=e.sent).map(function(e){return e.body})).unshift(n.body),r=r.join("\n").split(/\r?\n/),s=r.filter(function(e){return e.trim().toLowerCase().startsWith("- [x]")}).length,o=r.filter(function(e){return e.trim().startsWith("- [ ]")}).length,e.abrupt("return",{completed:s,outstanding:o});case 10:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"establishDeliveryDate",value:function(e,t){return null===t?null:e.milestone&&e.milestone.due_on?void 0===t?new Date(e.milestone.due_on):Math.max(t,new Date(e.milestone.due_on)):null}},{key:"template",value:function(e,t){return{labels:e,repo:t,deliveryDate:void 0,todo:{issues:[],p1bugs:[],p2bugs:[],p3bugs:[],others:[]},wip:{issues:[],p1bugs:[],p2bugs:[],p3bugs:[],others:[]},done:{issues:[],p1bugs:[],p2bugs:[],p3bugs:[],others:[]}}}},{key:"generateSummary",value:function(){var e=Object(c.a)(u.a.mark(function e(t,n,a){var r,s,o,i,c,l,m,p,d,h,b,f,v,g,y;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(r={},s=!0,o=!1,i=void 0,e.prev=4,c=a[Symbol.iterator]();!(s=(l=c.next()).done);s=!0)m=l.value,r[m]=this.template(n,m);e.next=12;break;case 8:e.prev=8,e.t0=e.catch(4),o=!0,i=e.t0;case 12:e.prev=12,e.prev=13,s||null==c.return||c.return();case 15:if(e.prev=15,!o){e.next=18;break}throw i;case 18:return e.finish(15);case 19:return e.finish(12);case 20:for(p=!0,d=!1,h=void 0,e.prev=23,b=t[Symbol.iterator]();!(p=(f=b.next()).done);p=!0)v=f.value,g="".concat(v.owner,"/").concat(v.repo),(y=r[g])[v.state][v.type].push(v),"done"!==v.state&&["issues","p1bugs"].includes(v.type)&&(y.deliveryDate=this.establishDeliveryDate(v,y.deliveryDate));e.next=31;break;case 27:e.prev=27,e.t1=e.catch(23),d=!0,h=e.t1;case 31:e.prev=31,e.prev=32,p||null==b.return||b.return();case 34:if(e.prev=34,!d){e.next=37;break}throw h;case 37:return e.finish(34);case 38:return e.finish(31);case 39:return e.abrupt("return",{labels:n,repos:Object.values(r)});case 40:case"end":return e.stop()}},e,this,[[4,8,12,20],[13,,15,19],[23,27,31,39],[32,,34,38]])}));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),E=n(48),w=n(44),j=n.n(w),O=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(e){e.preventDefault();var t=prompt("Personal github token",localStorage.getItem("github_token")||"");null!==t&&(localStorage.setItem("github_token",t),window.location.reload())}},{key:"render",value:function(){return r.a.createElement("div",{className:"TokenInput ".concat(this.props.status),onClick:this.handleClick,title:"unauthenticated"===this.props.status?"Add a personal GitHub token to raise the limit of requests you can make to the API":"invalid-credentials"===this.props.status?"Your github token is invalid (fell back to unauthenticated access)":""},"unauthenticated"===this.props.status?"Add ":"","Personal GitHub Token")}}]),t}(a.Component),S=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"calculatePercentCompleted",value:function(e){var t=["issues","p1bugs"],n=t.map(function(t){return e.done[t].length}).reduce(function(e,t){return e+t}),a=t.map(function(t){return e.todo[t].length+e.wip[t].length+e.done[t].length}).reduce(function(e,t){return e+t},0);return 0===a?"~":(n/a*100).toFixed(0)}},{key:"getAssigneesFilter",value:function(e){var t=Object(E.a)(new Set(e.map(function(e){return e.assignees.map(function(e){return e.login})}).reduce(function(e,t){return e.concat(t)},[]))).map(function(e){return"assignee:".concat(e)}).join("+");return t||(t="no:assignee"),t}},{key:"makeLink",value:function(e,t,n,a){if(0===a.length)return r.a.createElement("span",null,"0");n||(n=[]);var s=!1;n.includes("assignee:*")&&(n=n.filter(function(e){return"assignee:*"!==e}),s=!0);var o=(n=n.concat(t.map(function(e){return"label:".concat(e)}))).join("+"),i="";if(s){var u=this.getAssigneesFilter(a);i="https://github.com/search?utf8=%E2%9C%93&q=repo%3A".concat(e,"+").concat(o,"+").concat(u,"&type=Issues&ref=advsearch&l=&l=+")}else i="https://github.com/".concat(e,"/issues?utf8=%E2%9C%93&q=").concat(o);var c=a.map(function(e){return"#".concat(e.number," ").concat(e.title)}).reduce(function(e,t){return e.concat(t)},[]);return r.a.createElement("a",{href:i,target:"_blank",rel:"noopener noreferrer",title:c.join("\n")},c.length)}},{key:"render",value:function(){var e=this.props.repoFeature;return r.a.createElement("div",{className:"Summary-Row"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://github.com/".concat(e.repo,"/issues")},e.repo)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:feature"],e.todo.issues)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","assignee:*","label:feature"],e.wip.issues)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:closed","label:feature"],e.done.issues)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:bug","-label:p2","-label:p3","-label:p4","-label:p5"],e.todo.p1bugs)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:bug","label:p2"],e.todo.p2bugs)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","no:assignee","label:bug","label:p3"],e.todo.p3bugs)),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:open","assignee:*","label:bug"],e.wip.p1bugs.concat(e.wip.p2bugs).concat(e.wip.p3bugs))),r.a.createElement("div",null,this.makeLink(e.repo,e.labels,["is:closed","label:bug"],e.done.p1bugs.concat(e.done.p2bugs).concat(e.done.p3bugs))),r.a.createElement("div",null,this.makeLink(e.repo,e.label,["is:open"].concat(e.todo.others.concat(e.wip.others).map(function(e){return e.number})),e.todo.others.concat(e.wip.others))),r.a.createElement("div",{className:e.deliveryDate?"":"NoDate"},e.deliveryDate?j()(e.deliveryDate,"yyyy-mm-dd"):"n/a"),r.a.createElement("div",{className:"Completed"},this.calculatePercentCompleted(e),"%"))}}]),t}(a.Component),C=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"calculatePercentCompleted",value:function(e){var t=["issues","p1bugs"],n=0,a=0,r=!0,s=!1,o=void 0;try{for(var i,u=function(){var e=i.value;n+=t.map(function(t){return e.done[t].length}).reduce(function(e,t){return e+t}),a+=t.map(function(t){return e.todo[t].length+e.wip[t].length+e.done[t].length}).reduce(function(e,t){return e+t},0)},c=e.repos[Symbol.iterator]();!(r=(i=c.next()).done);r=!0)u()}catch(l){s=!0,o=l}finally{try{r||null==c.return||c.return()}finally{if(s)throw o}}return 0===a?"~":(n/a*100).toFixed(0)}},{key:"render",value:function(){var e=this.props.feature.repos.map(function(e){return r.a.createElement(S,{repoFeature:e,key:e.repo})});return r.a.createElement("div",{className:"Summary"},r.a.createElement("div",{className:"Summary-Header"},r.a.createElement("div",{className:"Label"},this.props.feature.labels.join(" ")),r.a.createElement("div",{className:"PercentComplete"},this.calculatePercentCompleted(this.props.feature),"%")),r.a.createElement("div",{className:"Summary-Table"},r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Column Implementation"}),r.a.createElement("div",{className:"Summary-Column Implementation"}),r.a.createElement("div",{className:"Summary-Column Implementation"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column Bugs"}),r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Column"}),r.a.createElement("div",{className:"Summary-Row Summary-TableHeader"},r.a.createElement("div",null,"Repo"),r.a.createElement("div",null,r.a.createElement("span",{className:"MetaTitleHolder"},r.a.createElement("span",{className:"MetaTitle"},"Planned Work")),"Todo"),r.a.createElement("div",null,"WIP"),r.a.createElement("div",null,"Done"),r.a.createElement("div",null,r.a.createElement("span",{className:"MetaTitleHolder"},r.a.createElement("span",{className:"MetaTitle"},"Bugs")),"P1"),r.a.createElement("div",null,"P2"),r.a.createElement("div",null,"P3"),r.a.createElement("div",null,"WIP"),r.a.createElement("div",null,"Fixed"),r.a.createElement("div",null,"Other"),r.a.createElement("div",null,"Delivery"),r.a.createElement("div",null)),e),r.a.createElement(O,{status:this.props.connectionStatus}))}}]),t}(a.Component),x=n(49),N=n(20),D=n.n(N),P=function(){function e(){Object(l.a)(this,e)}return Object(m.a)(e,null,[{key:"getConnection",value:function(){var e=Object(c.a)(u.a.mark(function e(t){var n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{octokit:new D.a,status:"unauthenticated"});case 2:return n=void 0,a=new D.a({auth:"token ".concat(t)}),e.next=6,a.request("GET /").then(function(e){n={octokit:a,status:"authenticated"}}).catch(function(e){"HttpError"===e.name&&401===e.status&&(n={octokit:new D.a,status:"invalid-credentials"})});case 6:return e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"getIssues",value:function(){var e=Object(c.a)(u.a.mark(function e(t,n,a){var r,s,o;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.map(function(e){return"repo:"+e}).join(" ")+" "+n.map(function(e){return"label:".concat(e)}).join(" ")+" is:issue",s=t.search.issuesAndPullRequests.endpoint.merge({q:r}),e.next=4,t.paginate(s);case 4:return o=e.sent,e.abrupt("return",o.map(function(e){return new I(e)}));case 6:case"end":return e.stop()}},e)}));return function(t,n,a){return e.apply(this,arguments)}}()}]),e}(),I=function(){function e(t){Object(l.a)(this,e),this.githubIssue=t,this.url=t.url,this.labels=t.labels.map(function(e){return{color:e.color,name:e.name}}),this.progress=void 0,this.title=t.title,this.number=t.number,this.assignees=t.assignees;var n=t.repository_url.split("/"),a=n.slice(n.length-2),r=Object(x.a)(a,2);this.owner=r[0],this.repo=r[1],this.type=e.getType(t),this.state=e.getState(t)}return Object(m.a)(e,null,[{key:"getType",value:function(e){var t=e.labels.map(function(e){return e.name});if(t.includes("bug")){for(var n=["p1","p2","p3"],a=0;a<n.length;a++){var r=n[a];if(t.includes(r))return"".concat(r,"bugs")}return"p1bugs"}return t.includes("feature")||t.includes("enhancement")?"issues":"others"}},{key:"getState",value:function(e){return"closed"===e.state?"done":"open"!==e.state||0!==e.assignees.length&&void 0!==e.assignee?"wip":"todo"}}]),e}(),L=P,T=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this))).state={feature:{label:"Loading...",repos:[]},connection:{octokit:void 0,status:"connecting"}},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return console.log(this.props),this.props.feature.repos.map(function(e){return r.a.createElement("div",null,r.a.createElement("h3",{key:e.repo},e.repo),e.todo.concat(e.wip).concat(e.done).map(function(e){return r.a.createElement("div",{key:e.number},e)}))})}}]),t}(a.Component),A=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("pre",null,'\n    \u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2584\u2590\u2588\u2584\u2584\u2584\u2584\u2588\u258c\n    \u2588\u2588\u2588\u2588\u2588\u2588\u258c\u2584\u258c\u2584\u2590\u2590\u258c\u2588\u2588\u2588\u258c\u2580\u2580\u2588\u2588\u2580\u2580\n    \u2588\u2588\u2588\u2588\u2584\u2588\u258c\u2584\u258c\u2584\u2590\u2590\u258c\u2580\u2588\u2588\u2588\u2584\u2584\u2588\u258c\n    \u2584\u2584\u2584\u2584\u2584\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\n\n    Please what means "',Array.join(this.props.location.pathname.match(/.{1,36}/g),"\n                       "),'"?')}}]),t}(a.Component),B=(n(125),function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(p.a)(this,Object(d.a)(t).call(this))).state={feature:{labels:["Loading..."],repos:[]},connectionStatus:"connecting"},n}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=Object(c.a)(u.a.mark(function e(){var t,n,a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.location.hash.includes("?")){e.next=19;break}return t=g.a.parse(window.location.hash.substring(window.location.hash.indexOf("?"))),Array.isArray(t.repo)||(t.repo=[t.repo]),Array.isArray(t.label)||(t.label=[t.label]),e.next=6,L.getConnection();case 6:return n=e.sent,this.setState({connectionStatus:n.status}),document.title=t.label.join(" "),e.t0=k,e.next=12,L.getIssues(n.octokit,t.label,t.repo);case 12:return e.t1=e.sent,e.t2=t.label,e.t3=t.repo,e.next=17,e.t0.generateSummary.call(e.t0,e.t1,e.t2,e.t3);case 17:a=e.sent,this.setState({feature:a});case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(y.a,{onChange:function(e){window.location.reload()}}),r.a.createElement(b.a,null,r.a.createElement(f.c,null,r.a.createElement(f.a,{path:"/summary",render:function(t){return r.a.createElement(C,Object.assign({},t,{feature:e.state.feature,connectionStatus:e.state.connectionStatus}))}}),r.a.createElement(f.a,{path:"/plan",render:function(t){return r.a.createElement(T,Object.assign({},t,{feature:e.state.feature,connectionStatus:e.state.connectionStatus}))}}),r.a.createElement(f.a,{exact:!0,path:"/",component:F}),r.a.createElement(f.a,{component:A}))))}}]),t}(a.Component)),F=function(e){function t(){return Object(l.a)(this,t),Object(p.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return window.location.replace("".concat(window.location.pathname,"#/summary").concat(window.location.search)),r.a.createElement("p",null,"Redirecting...")}}]),t}(a.Component),H=B;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},50:function(e,t,n){e.exports=n(132)}},[[50,1,2]]]);
//# sourceMappingURL=main.914d5400.chunk.js.map